server {
  listen 80 default_server;
  server_name _;
  return 301 https://$host$request_uri;
}

server {
  server_name "~^(?!www\.).*" ;
  return 301 $scheme://www.$host$request_uri;
}

server {
  server_name 188.252.84.185;
  return 301 https://www.dks.pl$request_uri;
}

server {
  listen 443 ssl;
  server_name www.dks.pl;
  ssl_certificate /etc/nginx/certs/dks.pl_new.crt;
  ssl_certificate_key /etc/nginx/certs/dks.pl_new.key;
  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  ssl_ciphers HIGH:!aNULL:!MD5;

  location /backend {
    proxy_pass http://10.10.10.21;
  }

  location / {
    proxy_pass http://frontend:3000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }
  
  rewrite ^/index.html $scheme://$host permanent;
  rewrite ^/index.php $scheme://$host permanent;
  rewrite ^/serwis.html $scheme://$host/serwis-urzadzen-wielofunkcyjnych permanent;
  rewrite ^/show.html $scheme://$host permanent;
  rewrite ^/dks/kariera.html $scheme://$host/kariera permanent;
  rewrite ^/wynajem-urzadzen-wielofunkcyjnych $scheme://$host/oferta permanent;
  rewrite ^/materialy-eksploatacyjne $scheme://$host/oferta/materialy-eksploatacyjne permanent;  
  rewrite ^/dks/privacy-policy.html $scheme://$host/klauzula-ochrony-danych-data-protection permanent;
  rewrite ^/oferta/oprogramowanie-dla-biura/nt-ware $scheme://$host permanent;
  rewrite ^/oferta/oprogramowanie-dla-biura/papercut $scheme://$host permanent;
  rewrite ^/dks-punkt-kserograficzny-gdansk $scheme://$host permanent;
  rewrite ^/admin/login $scheme://$host permanent;

  rewrite ^/oddzial-bydgoszcz.html $scheme://$host/oddzialy/bydgoszcz permanent;
  rewrite ^/oddzial-gdansk.html  $scheme://$host/oddzialy/gdansk permanent;
  rewrite ^/oddzial-katowice.html  $scheme://$host/oddzialy/katowice permanent;
  rewrite ^/oddzial-krakow.html  $scheme://$host/oddzialy/krakow permanent;
  rewrite ^/oddzial-lodz.html  $scheme://$host/oddzialy/lodz permanent;
  rewrite ^/oddzial-olsztyn.html $scheme://$host/oddzialy/olsztyn permanent;
  rewrite ^/oddzial-poznan.html $scheme://$host/oddzialy/poznan permanent;
  rewrite ^/oddzial-rzeszow.html $scheme://$host/oddzialy/rzeszow permanent;
  rewrite ^/oddzial-szczecin.html $scheme://$host/oddzialy/szczecin permanent;
  rewrite ^/oddzial-warszawa.html $scheme://$host/oddzialy/warszawa permanent;
  rewrite ^/oddzial-wroclaw.html $scheme://$host/oddzialy/wroclaw permanent;

  rewrite ^/blog/3/czym-kierowac-sie-przy-wyborze-urzadzenia-do-druku-w-formacie-a3 $scheme://$host/blog/rozwiazania-dla-biura/czym-kierowac-sie-przy-wyborze-urzadzenia-do-druku-w-formacie-a3 permanent;
  rewrite ^/blog/3/dlaczego-w-biurach-dominuja-drukarki-laserowe $scheme://$host/blog/rozwiazania-dla-biura/dlaczego-w-biurach-dominuja-drukarki-laserowe permanent;
  rewrite ^/blog/3/wynajem-kserokopiarki-sposob-na-oszczednosci-w-twojej-firmie $scheme://$host/blog/rozwiazania-dla-biura/wynajem-kserokopiarki-sposob-na-oszczednosci-w-twojej-firmie permanent;
  rewrite ^/blog/3/audyt-optymalizacja-srodowiska-druku $scheme://$host/blog/rozwiazania-dla-biura/audyt-optymalizacja-srodowiska-druku permanent;
  rewrite ^/blog/3/kserokopiarka-niezbedne-wyposazenie-biura $scheme://$host/blog/rozwiazania-dla-biura/kserokopiarka-niezbedne-wyposazenie-biura permanent;
  rewrite ^/blog/3/jaka-drukarka-do-malej-i-sredniej-firmy $scheme://$host/blog/rozwiazania-dla-biura/jaka-drukarka-do-malej-i-sredniej-firmy permanent;
  rewrite ^/blog/3/kserokopiarka-do-szkoly-jak-wybrac $scheme://$host/blog/rozwiazania-dla-biura/kserokopiarka-do-szkoly-jak-wybrac permanent;
  rewrite ^/blog/3/skanowanie-co-warto-wiedziec $scheme://$host/blog/rozwiazania-dla-biura/skanowanie-co-warto-wiedziec permanent;
  rewrite ^/blog/6/systemy-druku-ograniczenie-kosztow-zwiazanych-z-wydrukiem-w-firmie $scheme://$host/blog/oprogramowanie/systemy-druku-ograniczenie-kosztow-zwiazanych-z-wydrukiem-w-firmie permanent;
  rewrite ^/blog/4/czym-rozni-sie-druk-cyfrowy-i-druk-offsetowy $scheme://$host/blog/rozwiazania-dla-poligrafii/czym-rozni-sie-druk-cyfrowy-i-druk-offsetowy permanent;
  rewrite ^/blog/3/jak-ograniczyc-koniecznosc-wzywania-serwisanta-urzadzen-wielofunkcyjnych $scheme://$host/blog/rozwiazania-dla-biura/jak-ograniczyc-koniecznosc-wzywania-serwisanta-urzadzen-wielofunkcyjnych permanent;
  rewrite ^/blog/3/dlaczego-warto-drukowac-w-kolorze $scheme://$host/blog/rozwiazania-dla-biura/dlaczego-warto-drukowac-w-kolorze permanent;
  rewrite ^/blog/3/jaka-wybrac-kserokopiarke $scheme://$host/blog/rozwiazania-dla-biura/jaka-wybrac-kserokopiarke permanent;
  rewrite ^/blog/3/kserokopiarki-na-czym-polega-dzierzawa? $scheme://$host/blog/rozwiazania-dla-biura/kserokopiarki-na-czym-polega-dzierzawa permanent;
  rewrite ^/blog/3/kserokopiarki-zakup-czy-wynajem $scheme://$host/blog/rozwiazania-dla-biura/kserokopiarki-zakup-czy-wynajem permanent;
  rewrite ^/blog/3/czy-tonery-i-serwis-sa-wliczone-w-cene-wynajmu-kserokopiarki $scheme://$host/blog/rozwiazania-dla-biura/czy-tonery-i-serwis-sa-wliczone-w-cene-wynajmu-kserokopiarki permanent;
  rewrite ^/blog/3/urzadzenie-wielofunkcyjne-kserokopiarka-a4-a3-czy-drukarka $scheme://$host/blog/rozwiazania-dla-biura/urzadzenie-wielofunkcyjne-kserokopiarka-a4-a3-czy-drukarka permanent;
  rewrite ^/blog/3/polecani-producenci-kserokopiarek $scheme://$host/blog/rozwiazania-dla-biura/polecani-producenci-kserokopiarek permanent;
  rewrite ^/blog/3/kserokopiarka-mono-czy-kolor $scheme://$host/blog/rozwiazania-dla-biura/kserokopiarka-mono-czy-kolor permanent;
  rewrite ^/blog/3/funkcje-kserokopiarki $scheme://$host/blog/rozwiazania-dla-biura/kserokopiarka-mono-czy-kolor permanent;
  rewrite ^/blog/3/bezpieczenstwo-druku-jak-zadbac-o-dane $scheme://$host/blog/rozwiazania-dla-biura/bezpieczenstwo-druku-jak-zadbac-o-dane permanent;
  rewrite ^/blog/7-8-sierpnia-dni-otwarte-dks-we-wroclawiu $scheme://$host/blog/rozwiazania-dla-poligrafii/7-8-sierpnia-dni-otwarte-dks-we-wroclawiu  permanent;
  rewrite ^/aktualnosci/10-11-lipca-dni-otwarte-dks-w-oddziale-katowice  $scheme://$host/blog/rozwiazania-dla-poligrafii/10-11-lipca-dni-otwarte-dks-w-oddziale-katowice permanent;
  rewrite ^/aktualnosci/dni-otwarte-dks-w-rzeszowie-26-27-czerwca $scheme://$host/blog/rozwiazania-dla-poligrafii/dni-otwarte-dks-w-rzeszowie-26-27-czerwca permanent;
  rewrite ^/aktualnosci/dni-otwarte-dks-w-rzeszowie-26-27-czerwca $scheme://$host/blog/rozwiazania-dla-poligrafii/dni-otwarte-dks-w-rzeszowie-26-27-czerwca permanent;
  rewrite ^/aktualnosci/dni-otwarte-22-23-maja-w-gdansku $scheme://$host/blog/rozwiazania-dla-poligrafii/dni-otwarte-22-23-maja-w-gdansku permanent;
  rewrite ^/dks/aktualnosci/bialystok-dni-otwarte-dla-branzy-poligraficznej-projektowej-i-kartograficzno-geodezyjnej-pnews-69.html $scheme://$host/blog/rozwiazania-dla-poligrafii/firma-dks-zaprasza-na-cykl-dni-otwartych permanent;
}
